| 周次        | 主要目标                 | 任务与方法                                                                                                                         | 交付物                 |
| --------- | -------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ------------------- |
| **第 1 周** | **需求分析 & 技术调研**      | - 梳理功能与非功能需求（见最初的项目描述）<br/>- 调研现有 P2P 协议（Kademlia、BitTorrent、IPFS）<br/>- 确定技术栈（Node.js/TypeScript + React + Vite + WebSocket） | 需求文档、技术选型报告         |
| **第 2 周** | **系统设计 & 架构搭建**      | - 绘制系统架构图（DHT 网络、存储模块、前后端通信、UI 层）<br/>- 制定模块接口规范（REST/WebSocket API、DHT RPC）<br/>- 搭建项目脚手架（Mono-repo 结构）                      | 架构文档、项目骨架代码（Git 仓库） |
| **第 3 周** | **DHT 节点 & 路由实现**    | - 在 `peer-node/` 中实现 Kademlia 的 `PING`, `FIND_NODE`, `STORE`, `FIND_VALUE` 等 RPC<br/>- 单元测试路由表（k-buckets）和 XOR 距离算法           | DHT 模块源码 + 单元测试报告   |
| **第 4 周** | **文件切分、哈希与存储模块**     | - 设计并实现文件切片（chunking）逻辑<br/>- 对每个 chunk 计算 SHA-256 哈希并组织 Merkle Tree<br/>- 本地持久化存储与索引管理                                       | 存储模块源码 + 存储接口文档     |
| **第 5 周** | **点对点网络通信 & NAT 穿透** | - 使用 TCP/WebSocket 建立节点间连接<br/>- 集成 STUN/TURN 实现 NAT 穿透<br/>- 验证点对点直连和中继两种模式的可行性                                              | 网络模块源码 + NAT 穿透测试记录 |
| **第 6 周** | **安全与加密**            | - 设计握手流程（公钥交换 + 对称密钥协商，TLS/Noise）<br/>- 实现数据加密/解密、数字签名与完整性校验<br/>- 安全单元测试与漏洞扫描                                                | 安全模块源码 + 安全测试报告     |
| **第 7 周** | **前端 Web UI 开发**     | - 基于 React + TypeScript 实现：文件上传、搜索、下载进度、Peer 列表组件<br/>- 用 WebSocket 与本地 peer-node 通信<br/>- UI/UX 可用性测试                        | 前端源码 + 可用性测试反馈      |
| **第 8 周** | **系统集成 & 功能测试**      | - 把前后端在本地环境（Docker Compose）中联调<br/>- 编写并执行端到端测试脚本：上传→DHT 发布→下载 全流程<br/>- 性能测试（多节点并发下载、带宽评估）                                   | 集成测试报告 + 性能测试数据     |
| **第 9 周** | **部署、文档与演示准备**       | - 撰写用户手册与开发文档（README、配置说明、运维脚本）<br/>- 在云服务器/校园机房部署演示环境<br/>- 准备 PPT，进行项目演示和彩排                                                 | 部署文档、用户手册、演示 PPT    |

---

### 方法论与建议

* **迭代开发**：每周结束前在 GitHub/GitLab 打标签，方便回滚与评审。
* **测试驱动**：核心算法（DHT、存储、安全）均应先写测试再实现。
* **持续集成**：配置 CI（GitHub Actions）自动构建、测试和代码质量检查。
* **定期汇报**：建议每两周向导师汇报进度，及时获取反馈并调整方案。

---

**Week 1: 需求分析 & 技术调研**


## 一、需求分析

### 1. 功能性需求

1. **用户注册／身份管理（可选）**

   * 支持匿名或基于公钥的用户标识
2. **文件分享**

   * 上传文件 → 切片 → 生成内容哈希（CID）
   * 在 DHT 中发布文件元信息（CID → 发布节点列表）
3. **文件发现**

   * 根据 CID 或关键字（可选）查询文件来源
   * 返回可用的节点列表
4. **文件下载**

   * 并行从多个节点拉取切片
   * 解密（如有）＋校验完整性 → 本地重组
5. **离线可用性**

   * 本地保留已上传／已下载文件副本
   * 支持复制或纠删码冗余（可选）

### 2. 非功能性需求

1. **可扩展性**

   * 支持成百上千节点同时在线
   * 路由和存储复杂度 O(log N)
2. **安全性**

   * 端到端加密（对称＋非对称）
   * 数据完整性校验（SHA-256／Merkle）
   * 防止中间人攻击（TLS/Noise 协议）
3. **可用性 & 容错性**

   * 节点离线不影响网络路由
   * 数据冗余保证高可用
4. **性能**

   * 分片并行下载，带宽利用率最大化
   * NAT 穿透（STUN/TURN）保证连通率
5. **易用性**

   * Web 界面无需本地安装
   * 简洁直观的操作流程

---

## 二、技术调研

| 功能模块         | 候选技术                                              | 优势                                           | 考虑因素                                         |
| ------------ | ------------------------------------------------- | -------------------------------------------- | -------------------------------------------- |
| **P2P 网络层**  | • libp2p (JavaScript, Go)<br>• 自研 Kademlia DHT    | libp2p：成熟、生态丰富；自研：全面掌控协议细节                   | libp2p 学习曲线、自研工作量                            |
| **后端语言**     | • Node.js + TypeScript<br>• Go<br>• Rust          | Node.js：开发快、社区大<br>Go：并发模型优秀<br>Rust：性能+安全   | 团队熟悉度、开发效率 vs 性能需求                           |
| **加密库／协议**   | • `libsodium` / `tweetnacl`<br>• Node.js `crypto` | libsodium：高性能跨语言<br>内置 crypto：无需额外依赖         | API 简洁度、审计成熟度                                |
| **NAT 穿透**   | • STUN/TURN（coturn）<br>• WebRTC Data Channel      | coturn：稳定的 TURN 服务<br>WebRTC：浏览器内建穿透支持       | 需部署 TURN 服务器；WebRTC 对非浏览器节点支持有限              |
| **前端框架**     | • React + TypeScript + Vite<br>• Vue 3 + Vite     | React 生态丰富；Vue 学习曲线较平缓                       | 团队经验、社区插件支持                                  |
| **实时通讯**     | • WebSocket (`ws` / `socket.io`)<br>• WebRTC      | WebSocket：API 简单，双向低延迟<br>WebRTC：真正 P2P 数据通道 | WebRTC 信令需要另建 signaling；WebSocket 需要 TURN 转发 |
| **存储方案**     | • 本地文件系统<br>• LevelDB / RocksDB (索引)              | 本地 FS：直接读写<br>LevelDB：快速键值存储                 | 索引数据量 vs 查询性能                                |
| **测试框架**     | • Jest + Supertest<br>• Go test / Rust cargo test | Jest：生态丰富；Go/Rust：内建测试支持                     | 语言选型绑定相应测试框架                                 |
| **容器化 & 部署** | • Docker + docker-compose<br>• Kubernetes (可选)    | Docker Compose：本地开发简单<br>K8s：生产级可扩展          | 项目规模、团队运维能力                                  |

---

## 三、技术选型建议

1. **快速验证原型**

   * **Node.js + TypeScript**：框架齐全、开发效率高
   * libp2p JS 版或自研轻量 Kademlia
   * WebSocket + coturn 支持穿透

2. **生产优化路径**

   * 核心 DHT／网络模块可考虑 **Go** 重写以提升并发与性能
   * 前期用 React 快速搭界面，后期迭代可增加 WebRTC 支持进行纯 P2P 传输

3. **安全**

   * 使用 **libsodium** 做加密签名
   * TLS/Noise 协议保护节点握手

4. **存储与冗余**

   * 初期本地 FS + JSON 索引
   * 后期可用 **LevelDB** 做高效键值存储

---

**本周交付：**

* 完整的《需求规格说明书》
* 《技术选型报告》并在团队／导师处确认后进入第 2 周的系统设计阶段。
